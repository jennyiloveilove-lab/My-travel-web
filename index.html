<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å€‹äººæ—…æ—¥è¨˜ V35 âœˆï¸ (å«è³¼ç‰©æ¸…å–®)</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-blue: #64cccc; --primary-green: #5eb586; --bg-light: #f4fbfb; --text-dark: #2d5a5a; }
        body { background-color: var(--bg-light); font-family: 'Zen Maru Gothic', sans-serif; color: var(--text-dark); -webkit-tap-highlight-color: transparent; }
        .app-container { max-width: 480px; margin: 0 auto; min-height: 100vh; padding-bottom: 120px; }
        
        /* è¦–è¦ºèˆ‡é¢¨æ ¼ */
        .top-nav { background: var(--primary-blue); color: white; border-radius: 0 0 2.5rem 2.5rem; padding: 2.5rem 1.5rem 2rem; }
        .card-event { background: white; border-radius: 24px; padding: 20px; border: 1px solid #eef7f7; box-shadow: 0 4px 12px rgba(0,0,0,0.02); position: relative; margin-bottom: 16px; }
        
        /* å°èˆªæ¬„ */
        .bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; background: white; display: flex; justify-content: space-around; padding: 15px 10px 30px; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 100; }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: #cbd5e0; font-size: 10px; font-weight: bold; }
        .nav-item.active { color: var(--primary-blue); }
        .nav-item.active-green { color: var(--primary-green); }

        /* è³¼ç‰©æ¸…å–®å°ˆå±¬æ¨£å¼ */
        .shop-tag { background: #e6f4ed; color: var(--primary-green); padding: 2px 8px; border-radius: 6px; font-size: 10px; font-weight: bold; }
        .shop-input { border: none; background: #f0f9f4; border-radius: 15px; padding: 12px 20px; width: 100%; outline: none; }
        .add-btn { background: var(--primary-green); color: white; border-radius: 15px; padding: 10px 25px; font-weight: black; }
        .list-item { background: white; border-radius: 18px; padding: 15px 20px; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; }
        .done-text { text-decoration: line-through; opacity: 0.3; }
        
        /* åœ°åœ–æŒ‰éˆ• */
        .map-nav-btn { position: absolute; bottom: 18px; right: 18px; width: 42px; height: 42px; border-radius: 12px; background: #f0f9f9; color: var(--primary-blue); display: flex; align-items: center; justify-content: center; z-index: 10; border: 1px solid #e0f2f2; }
        
        .modal-overlay { background: rgba(45, 90, 90, 0.4); backdrop-filter: blur(8px); position: fixed; inset: 0; z-index: 1000; display: flex; align-items: flex-end; }
        .modal-content { background: white; width: 100%; border-radius: 3rem 3rem 0 0; padding: 2rem; max-height: 90vh; overflow-y: auto; }
        .fab-add { position: fixed; bottom: 100px; right: 25px; width: 64px; height: 64px; border-radius: 50%; background: var(--primary-blue); color: white; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 10px 25px rgba(100,204,204,0.3); border: 4px solid white; z-index: 90; }
    </style>
</head>
<body>

<div id="app" class="app-container">
    
    <div v-if="currentTab === 'itinerary'">
        <header class="top-nav mb-6">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <p class="text-2xl font-black">{{ currentTime }}</p>
                    <h1 class="text-[10px] font-bold opacity-70 tracking-widest uppercase italic">Okinawa Go!</h1>
                </div>
                <button class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center"><i class="fa-solid fa-wallet"></i></button>
            </div>
            <div class="bg-white/10 p-4 rounded-3xl border border-white/10 mb-6 text-sm font-black">â˜€ï¸ 2Â° C æ–¼ç•¶åœ°</div>
            <div class="flex gap-3 overflow-x-auto no-scrollbar py-2">
                <div v-for="(day, index) in itinerary" :key="index" @click="activeDay = index" class="px-4 py-3 rounded-2xl bg-white text-center min-w-[60px]" :style="activeDay === index ? 'border:2px solid #64cccc' : ''">
                    <span class="text-[8px] block opacity-40">Day {{index+1}}</span>
                    <span class="font-black text-sm">{{getTabDate(index)}}</span>
                </div>
            </div>
        </header>

        <main class="px-6">
            <div v-for="(event, eIdx) in itinerary[activeDay].events" :key="event.id" class="card-event" @click="openEdit(eIdx)">
                <span class="text-[10px] font-black text-gray-300">{{ event.time }} {{ getEmoji(event.category) }}</span>
                <h3 class="text-lg font-black mt-1">{{ event.location }}</h3>
                <button @click.stop="autoSearchMap(event.location)" class="map-nav-btn"><i class="fa-solid fa-map-location-dot"></i></button>
            </div>
        </main>
        <button @click="openAdd" class="fab-add"><i class="fa-solid fa-plus"></i></button>
    </div>

    <div v-if="currentTab === 'shopping'" class="px-6 pt-10">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-black border-b-4 border-[#5eb586] pb-1">æƒ³è²·æ¸…å–®</h2>
            <span class="shop-tag">å·²å®Œæˆ {{ doneCount }}/{{ shoppingList.length }}</span>
        </div>

        <div class="bg-[#f0f9f4] rounded-[30px] p-6 mb-8 border border-[#e0f2ed]">
            <p class="text-[#5eb586] text-xs font-black mb-3 ml-2">å¿«é€Ÿæ–°å¢é …ç›®</p>
            <div class="flex gap-3">
                <input v-model="newItemName" @keyup.enter="addShopItem" placeholder="ä¾‹å¦‚ï¼šåˆåˆ©ä»–å‘½" class="shop-input text-sm font-bold">
                <button @click="addShopItem" class="add-btn text-sm">Add</button>
            </div>
        </div>

        <div v-if="shoppingList.length > 0">
            <div v-for="(item, index) in shoppingList" :key="index" @click="toggleShopItem(index)" class="list-item shadow-sm border border-gray-50">
                <div class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all" :class="item.done ? 'bg-[#5eb586] border-[#5eb586]' : 'border-gray-200'">
                    <i v-if="item.done" class="fa-solid fa-check text-white text-[10px]"></i>
                </div>
                <span class="text-sm font-bold flex-1" :class="{ 'done-text': item.done }">{{ item.name }}</span>
                <button @click.stop="removeShopItem(index)" class="text-gray-200 text-xs px-2">Ã—</button>
            </div>
        </div>
        
        <div v-else class="text-center py-20 opacity-30">
            <p class="text-xs font-bold italic">æ¸…å–®ä¿‚ç©ºå˜…ï¼Œå¿«å•²å»è£œè²¨ï¼</p>
        </div>
    </div>

    <div v-if="currentTab === 'expense'" class="flex flex-col items-center justify-center h-[70vh] opacity-20">
        <i class="fa-solid fa-receipt text-6xl mb-4"></i>
        <p class="font-black">åˆ†å¸³åŠŸèƒ½é–‹ç™¼ä¸­...</p>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item" :class="{ active: currentTab === 'itinerary' }" @click="currentTab = 'itinerary'">
            <i class="fa-solid fa-location-dot text-xl"></i>
            <span>è¡Œç¨‹</span>
        </div>
        <div class="nav-item" :class="{ 'active-green': currentTab === 'shopping' }" @click="currentTab = 'shopping'">
            <i class="fa-solid fa-bag-shopping text-xl"></i>
            <span>è³¼ç‰©</span>
        </div>
        <div class="nav-item" :class="{ active: currentTab === 'expense' }" @click="currentTab = 'expense'">
            <i class="fa-solid fa-wallet text-xl"></i>
            <span>åˆ†å¸³</span>
        </div>
    </nav>

    </div>

<script>
const { createApp } = Vue;
createApp({
    data() {
        return {
            currentTab: 'itinerary', // åˆ‡æ›åˆ†é 
            currentTime: '00:00',
            activeDay: 0,
            itinerary: [{ events: [] }],
            shoppingList: [], // è³¼ç‰©æ¸…å–®æ•¸æ“š
            newItemName: '',
            showModal: false, isNew: true,
            form: { category: 'spot', location: '', time: '12:00', cost: 0, currency: 'JPY' }
        }
    },
    computed: {
        doneCount() { return this.shoppingList.filter(i => i.done).length; }
    },
    methods: {
        // è³¼ç‰©æ¸…å–®åŠŸèƒ½
        addShopItem() {
            if(!this.newItemName) return;
            this.shoppingList.push({ name: this.newItemName, done: false });
            this.newItemName = '';
            this.saveAll();
        },
        toggleShopItem(index) {
            this.shoppingList[index].done = !this.shoppingList[index].done;
            this.saveAll();
        },
        removeShopItem(index) {
            this.shoppingList.splice(index, 1);
            this.saveAll();
        },
        // è¡Œç¨‹åŠŸèƒ½ (åŒ V34)
        getEmoji(id) { return {spot:'ğŸŒ¸', eat:'ğŸ±', shop:'ğŸ›ï¸', hotel:'ğŸ¨', transport:'ğŸšƒ', flight:'âœˆï¸'}[id] || 'ğŸ“'; },
        getTabDate(i) { const d = new Date(); d.setDate(d.getDate()+i); return `${d.getMonth()+1}/${d.getDate()}`; },
        autoSearchMap(loc) { window.open(`https://www.google.com/maps/search/${encodeURIComponent(loc)}`, '_blank'); },
        saveAll() {
            localStorage.setItem('travel_itinerary_v35', JSON.stringify(this.itinerary));
            localStorage.setItem('travel_shopping_v35', JSON.stringify(this.shoppingList));
        }
    },
    mounted() {
        const iData = localStorage.getItem('travel_itinerary_v35');
        const sData = localStorage.getItem('travel_shopping_v35');
        if(iData) this.itinerary = JSON.parse(iData);
        if(sData) this.shoppingList = JSON.parse(sData);
        setInterval(() => { this.currentTime = new Date().toLocaleTimeString('zh-HK', {hour12:false, hour:'2-digit', minute:'2-digit'}); }, 1000);
    }
}).mount('#app');
</script>
</body>
</html>